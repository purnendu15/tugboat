---
schema: pegleg/AccountCatalogue/v1
metadata:
  schema: metadata/Document/v1
  name: ucp_service_accounts
  layeringDefinition:
    abstract: false
    layer: site
  storagePolicy: cleartext
data:
  ucp:
    postgres:
      admin:
        username: postgres
    oslo_db:
      admin:
        username: root
    oslo_messaging:
      admin:
        username: rabbitmq
    keystone:
      admin:
        region_name: RegionOne
        username: admin
        project_name: admin
        user_domain_name: default
        project_domain_name: default
      oslo_messaging:
        admin:
          username: rabbitmq
        keystone:
          username: keystone
      oslo_db:
        username: keystone
        database: keystone
    promenade:
      keystone:
        region_name: RegionOne
        role: admin
        project_name: service
        project_domain_name: default
        user_domain_name: default
        username: promenade
    drydock:
      keystone:
        region_name: RegionOne
        role: admin
        project_name: service
        project_domain_name: default
        user_domain_name: default
        username: drydock
      postgres:
        username: drydock
        database: drydock
    shipyard:
      keystone:
        region_name: RegionOne
        role: admin
        project_name: service
        project_domain_name: default
        user_domain_name: default
        username: shipyard
      postgres:
        username: shipyard
        database: shipyard
    airflow:
      postgres:
        username: airflow
        database: airflow
      oslo_messaging:
        username: rabbitmq
    maas:
      admin:
        username: admin
        email: none@none
      postgres:
        username: maas
        database: maasdb
    barbican:
      keystone:
        region_name: RegionOne
        role: admin
        project_name: service
        project_domain_name: default
        user_domain_name: default
        username: barbican
      oslo_db:
        username: barbican
        database: barbican
      oslo_messaging:
        admin:
          username: rabbitmq
        keystone:
          username: keystone
    armada:
      keystone:
        project_domain_name: default
        user_domain_name: default
        project_name: service
        region_name: RegionOne
        role: admin
        user_domain_name: default
        username: armada
    deckhand:
      keystone:
        region_name: RegionOne
        role: admin
        project_name: service
        project_domain_name: default
        user_domain_name: default
        username: deckhand
      postgres:
        username: deckhand
        database: deckhand
  ceph:
    swift:
      keystone:
        role: admin
        region_name: RegionOne
        username: swift
        project_name: service
        user_domain_name: default
        project_domain_name: default
...
---
schema: pegleg/AccountCatalogue/v1
metadata:
  schema: metadata/Document/v1
  name: osh_service_accounts
  layeringDefinition:
    abstract: false
    layer: site
  storagePolicy: cleartext
  substitutions:
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.keystone.admin.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.cinder.cinder.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.glance.glance.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.heat.heat.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.heat.heat_trustee.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.heat.heat_stack_user.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.swift.keystone.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.neutron.neutron.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.nova.nova.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.nova.placement.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.barbican.barbican.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh.barbican.barbican.region_name
data:
  osh:
    keystone:
      admin:
        username: admin
        project_name: admin
        user_domain_name: default
        project_domain_name: default
      oslo_db:
        username: keystone
        database: keystone
      oslo_messaging:
        admin:
          username: keystone-rabbitmq-admin
        keystone:
          username: keystone-rabbitmq-user
      ldap:
        username: {{data['ldap_username']}}
    cinder:
      cinder:
        role: admin
        username: cinder
        project_name: service
        user_domain_name: default
        project_domain_name: default
      oslo_db:
        username: cinder
        database: cinder
      oslo_messaging:
        admin:
          username: cinder-rabbitmq-admin
        cinder:
          username: cinder-rabbitmq-user
    glance:
      glance:
        role: admin
        username: glance
        project_name: service
        user_domain_name: default
        project_domain_name: default
      oslo_db:
        username: glance
        database: glance
      oslo_messaging:
        admin:
          username: glance-rabbitmq-admin
        glance:
          username: glance-rabbitmq-user
      ceph_object_store:
        username: glance
    heat:
      heat:
        role: admin
        username: heat
        project_name: service
        user_domain_name: default
        project_domain_name: default
      heat_trustee:
        role: admin
        username: heat-trust
        project_name: service
        user_domain_name: default
        project_domain_name: default
      heat_stack_user:
        role: admin
        username: heat-domain
        domain_name: heat
      oslo_db:
        username: heat
        database: heat
      oslo_messaging:
        admin:
          username: heat-rabbitmq-admin
        heat:
          username: heat-rabbitmq-user
    swift:
      keystone:
        role: admin
        username: swift
        project_name: service
        user_domain_name: default
        project_domain_name: default
    oslo_db:
      admin:
        username: root
    neutron:
      neutron:
        role: admin
        username: neutron
        project_name: service
        user_domain_name: default
        project_domain_name: default
      oslo_db:
        username: neutron
        database: neutron
      oslo_messaging:
        admin:
          username: neutron-rabbitmq-admin
        neutron:
          username: neutron-rabbitmq-user
    nova:
      nova:
        role: admin
        username: nova
        project_name: service
        user_domain_name: default
        project_domain_name: default
      placement:
        role: admin
        username: placement
        project_name: service
        user_domain_name: default
        project_domain_name: default
      oslo_db:
        username: nova
        database: nova
      oslo_db_api:
        username: nova
        database: nova_api
      oslo_db_cell0:
        username: nova
        database: "nova_cell0"
      oslo_messaging:
        admin:
          username: nova-rabbitmq-admin
        nova:
          username: nova-rabbitmq-user
    horizon:
      oslo_db:
        username: horizon
        database: horizon
    barbican:
      barbican:
        role: admin
        username: barbican
        project_name: service
        user_domain_name: default
        project_domain_name: default
      oslo_db:
        username: barbican
        database: barbican
      oslo_messaging:
        admin:
          username: barbican-rabbitmq-admin
        barbican:
          username: barbican-rabbitmq-user
...
---
schema: pegleg/AccountCatalogue/v1
metadata:
  schema: metadata/Document/v1
  name: osh_infra_service_accounts
  layeringDefinition:
    abstract: false
    layer: site
  storagePolicy: cleartext
  substitutions:
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh_infra.prometheus_openstack_exporter.user.region_name
data:
  osh_infra:
    grafana:
      admin:
        username: grafana
      oslo_db:
        username: grafana
        database: grafana
      oslo_db_session:
        username: grafana_session
        database: grafana_session
    elasticsearch:
      admin:
        username: elasticsearch
    kibana:
      admin:
        username: kibana
    oslo_db:
      admin:
        username: root
    prometheus_openstack_exporter:
      user:
        role: admin
        username: prometheus-openstack-exporter
        project_name: service
        user_domain_name: default
        project_domain_name: default
    nagios:
      admin:
        username: nagios
    ldap:
      admin:
        bind: {{data['ldap_username']}}
...
---
schema: pegleg/AccountCatalogue/v1
metadata:
  schema: metadata/Document/v1
  name: ro_service_accounts
  layeringDefinition:
    abstract: false
    layer: site
  storagePolicy: cleartext
  substitutions:
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .ro.keystone.admin.region_name
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .ro.keystone.ro.region_name
data:
  ro:
    keystone:
      ro:
        username: ro_admin
        project_name: admin
        user_domain_name: default
        project_domain_name: default
    oslo_db:
      username: ro_admin
      database: ro_admin
    keystone_oslo_messaging:
      ro:
        username: ro_admin
    cinder_oslo_messaging:
      ro:
        username: ro_admin
    glance_oslo_messaging:
      ro:
        username: ro_admin
    heat_oslo_messaging:
      ro:
        username: ro_admin
    neutron_oslo_messaging:
      ro:
        username: ro_admin
    nova_oslo_messaging:
      ro:
        username: ro_admin
...
---
schema: pegleg/AccountCatalogue/v1
metadata:
  schema: metadata/Document/v1
  name: osh_addons_service_accounts
  layeringDefinition:
    abstract: false
    layer: site
  storagePolicy: cleartext
  substitutions:
    - src:
        schema: pegleg/CommonSoftwareConfig/v1
        name: common-software-config
        path: .osh.region_name
      dest:
        path: .osh_addons.ranger-agent.ranger-agent.region_name
data:
  osh_addons:
    ranger-agent:
      ranger_agent:
        role: admin
        username: ranger-agent-admin
        project_name: service
        user_domain_name: default
        project_domain_name: default
      oslo_db:
        admin:
          username: root
        ranger_agent:
          username: ranger-agent
        database: ord
      oslo_messaging:
        admin:
          username: ranger-agent-rabbitmq-admin
        ranger-agent:
          username: ranger-agent-rabbitmq-user
...
